(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3459],{3236:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(4631)}])},2461:function(e,a,t){"use strict";t.d(a,{EZ:function(){return o},Sv:function(){return r},uU:function(){return n}});var n,r=function(e,a){switch(a){case n.SCOUT:e.push("/dashboard/info","/dashboard",{shallow:!0});break;case n.RAMA:e.push("/dashboard/jefe-rama","/dashboard",{shallow:!0});break;case n.GRUPO:e.push("/dashboard/jefe-grupo/inscripciones","/dashboard",{shallow:!0});break;case n.TESORERO:e.push("/dashboard/tesorero","/dashboard",{shallow:!0});break;default:e.push("/dashboard/info","/dashboard",{shallow:!0})}};function o(){fetch("http://localhost:4000/api/payments/generateCSV/1",{method:"GET",headers:new Headers({"Referrer-Policy":"origin-when-cross-origin",Authorization:"Bearer "+localStorage.getItem("auth_token"),"Access-Control-Allow-Origin":"".concat("http://localhost:3000")})}).then((function(e){return e.blob()})).then((function(e){var a=window.URL.createObjectURL(e);Object.assign(document.createElement("a"),{target:"_blank",href:a,download:"Historial de pagos-".concat((new Date).toISOString().split("T")[0],".csv")}).click(),setTimeout((function(){window.URL.revokeObjectURL(a)}),100)}))}!function(e){e[e.SCOUT=0]="SCOUT",e[e.TESORERO=1]="TESORERO",e[e.RAMA=2]="RAMA",e[e.GRUPO=3]="GRUPO",e[e.ADMIN=4]="ADMIN"}(n||(n={}))},4631:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return w}});var n=t(7568),r=t(603),o=t(1351),s=t(655),i=t(5893),c=t(6798),l=t.n(c);function d(e){var a=e.text;return(0,i.jsx)("div",{className:l().area_titulo,children:(0,i.jsx)("div",{className:l().title,children:(0,i.jsx)("label",{children:a})})})}function u(e){var a=e.atribute,t=e.handleChange;return(0,i.jsx)("input",{id:a.id,name:a.name,placeholder:a.placeholder,type:a.type,onChange:function(e){return t(e.target.name,e.target.value)},className:l().entradas,maxLength:a.maxLength,required:!0})}var _=t(7294),h=t(708),g=t(7630),p=t.n(g),m=t(6455),f=t.n(m),x=t(1163),v=t(9898),b=t(8100),j=t(2461),w=function(){var e=function(e,a){"documento"===e?a.length>10?O(!0):/^[0-9]+$/.test(a)||0==a.length?(O(!1),a.length>0&&w(a)):O(!0):(S(a),a.length<8&&0!=a.length?T(!0):T(!1))},a=function(e){e.document.length>0||e.password.length,I(!0)},t=(0,x.useRouter)(),c=p()(f()),g=(0,_.useState)(""),m=g[0],w=g[1],L=(0,_.useState)(""),N=L[0],S=L[1],k=(0,_.useState)(!1),y=k[0],O=k[1],C=(0,_.useState)(!1),R=C[0],T=C[1],E=null!==(E=(0,_.useState)(!1))?E:(0,o.Z)(new TypeError("Cannot destructure undefined")),A=null!==(A=(0,_.useState)(!1))?A:(0,o.Z)(new TypeError("Cannot destructure undefined")),F=(0,_.useState)(!0),U=F[0],I=F[1],M=(0,v.xJ)(),P=M.user,G=M.isLoading,z=(M.error,(0,r.Z)((0,h.Z)(["token"]),2)[1]);function D(){return(D=(0,n.Z)((function(e){var n;return(0,s.__generator)(this,(function(r){return e.preventDefault(),(n={document:m,password:N})&&(a(n),U&&fetch("".concat("http://localhost:4000","/api/auth/login"),{mode:"cors",method:"POST",headers:{"Referrer-Policy":"origin-when-cross-origin","Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000")},body:JSON.stringify(n)}).then((function(e){return e.json().then((function(a){return e.ok?Promise.resolve(a):Promise.reject(a)}))})).then((function(e){z("token",e.data.accessToken),localStorage.setItem("auth_token",e.data.accessToken);var a=localStorage.getItem("role");a&&0!=a.length||localStorage.setItem("role","SCOUT"),(0,b.JG)("/api/auth/profile",null),t.push("/dashboard")})).catch((function(e){I(!0),c.fire({icon:"error",title:"\xa1Cuidado!",text:e.message,confirmButtonColor:"#E01C1C",confirmButtonText:"Reintentar"})}))),[2]}))}))).apply(this,arguments)}(0,_.useEffect)((function(){G||(0,j.Sv)(t,j.uU[j.uU[P.roles.id-1]])}),[P]);var B=(0,_.useState)(!0),J=B[0],Z=B[1];return(0,i.jsx)("form",{onSubmit:function(e){return D.apply(this,arguments)},children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)(d,{text:"\xa1Nos alegra verte de nuevo!"}),(0,i.jsx)("div",{className:l().letra,children:(0,i.jsxs)("div",{className:l().marco,children:[(0,i.jsx)("div",{className:l().margen}),(0,i.jsxs)("div",{className:l().area_entradas,children:[(0,i.jsx)(u,{atribute:{id:"documento",name:"documento",type:"number",placeholder:"Documento de identidad",maxLength:"10"},handleChange:e,param:y}),(0,i.jsx)("img",{src:"img/img_login/persona.png",className:l().user})]}),y&&(0,i.jsx)("div",{className:l().area_entradas,children:(0,i.jsx)("div",{children:(0,i.jsx)("label",{className:l().alerta_text,children:"Solo se permiten n\xfameros (0-9) en el documento"})})}),(0,i.jsxs)("div",{className:"input-group ".concat(l().passGroup),children:[(0,i.jsx)("div",{className:"input-group-prepend",children:(0,i.jsx)("img",{src:"img/img_login/key.png",className:l().pass})}),(0,i.jsx)("input",{type:"password",className:"form-control ".concat(l().entradas," ").concat(l().passInput),placeholder:"Contrase\xf1a","aria-label":"contrase\xf1a","aria-describedby":"basic-addon2",id:"contrase\xf1a",name:"contrase\xf1a",onChange:function(a){return e(a.target.name,a.target.value)}}),(0,i.jsx)("div",{className:"input-group-append",children:(0,i.jsx)("button",{className:"".concat(l().eye," btn btn-outline-secondar "),onClick:function(){var e=document.getElementById("contrase\xf1a");"password"===e.type?(e.type="text",Z(!1)):(e.type="password",Z(!0))},type:"button",id:"button-addon2",children:J?(0,i.jsxs)("svg",{width:"2em",height:"2em",viewBox:"0 0 16 16",className:"bi bi-eye-slash",fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{d:"M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"}),(0,i.jsx)("path",{d:"M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299l.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"}),(0,i.jsx)("path",{d:"M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709z"}),(0,i.jsx)("path",{"fill-rule":"evenodd",d:"M13.646 14.354l-12-12 .708-.708 12 12-.708.708z"})]}):(0,i.jsxs)("svg",{width:"2em",height:"2em",viewBox:"0 0 16 16",className:"bi bi-eye",fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{"fill-rule":"evenodd",d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.134 13.134 0 0 0 1.66 2.043C4.12 11.332 5.88 12.5 8 12.5c2.12 0 3.879-1.168 5.168-2.457A13.134 13.134 0 0 0 14.828 8a13.133 13.133 0 0 0-1.66-2.043C11.879 4.668 10.119 3.5 8 3.5c-2.12 0-3.879 1.168-5.168 2.457A13.133 13.133 0 0 0 1.172 8z"}),(0,i.jsx)("path",{"fill-rule":"evenodd",d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"})]})})})]}),R&&(0,i.jsx)("div",{className:l().area_entradas,children:(0,i.jsx)("div",{children:(0,i.jsx)("label",{className:l().alerta_text,children:"La contrase\xf1a debe superar los 8 caracteres"})})}),(0,i.jsx)("div",{className:l().area_boton,children:(0,i.jsx)("button",{type:"submit",className:l().boton,children:"INGRESAR"})}),(0,i.jsx)("div",{className:l().area_check,children:(0,i.jsx)("a",{className:l().olvida,href:"/recuperar",children:"\xbfOlvidaste tu contrase\xf1a?"})})]})}),(0,i.jsx)("div",{className:l().margen})]})})}},6798:function(e){e.exports={letra:"Login_letra__YKYji",area_titulo:"Login_area_titulo__nd3AV",area_entradas:"Login_area_entradas__o1mWV",area_entradas_r:"Login_area_entradas_r__B2FaP",area_entradas_c:"Login_area_entradas_c__NKvxD",area_check:"Login_area_check__8qFTJ",area_boton:"Login_area_boton__xkDnC",margen:"Login_margen__4_CGh",title:"Login_title__hf5qD",tarjeta:"Login_tarjeta__v_uSn",login_container:"Login_login_container__xFKSo",centrado:"Login_centrado__SP14G",entradas:"Login_entradas__BnIJ_",area_marco:"Login_area_marco__84cbk",marco:"Login_marco__DxekT",boton:"Login_boton__gOFHO",area_alertas:"Login_area_alertas__iwTOy",caja_alerta:"Login_caja_alerta__p_fmQ",check:"Login_check__nfgTn",olvida:"Login_olvida__njtcd",alerta_text:"Login_alerta_text__R7Kaq",alerta_text_r:"Login_alerta_text_r__IOe9r",eye:"Login_eye__vEv7n",passGroup:"Login_passGroup__n_5Jg",passInput:"Login_passInput__3dJO7",pass:"Login_pass__n__Ee",user:"Login_user__0yOUn",key:"Login_key__qkf4q"}},1351:function(e,a,t){"use strict";function n(e){throw e}t.d(a,{Z:function(){return n}})}},function(e){e.O(0,[4711,9774,2888,179],(function(){return a=3236,e(e.s=a);var a}));var a=e.O();_N_E=a}]);