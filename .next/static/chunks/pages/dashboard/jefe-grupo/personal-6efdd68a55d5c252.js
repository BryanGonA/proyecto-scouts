(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9780],{7002:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/jefe-grupo/personal",function(){return n(8421)}])},7884:function(e,r,n){"use strict";n.d(r,{Z:function(){return s}});var a=n(5893),t=n(1667),o=n(5853);function s(e){var r=e.content;return(0,a.jsxs)(t.Z,{content:r,children:[(0,a.jsx)(o.Z,{href:"/dashboard/info",name:"Informaci\xf3n personal",svg:"/img/dashboard/info.svg"}),(0,a.jsx)(o.Z,{href:"/dashboard/progress",name:"Mi progreso",svg:"/img/dashboard/progress.svg"}),(0,a.jsx)(o.Z,{href:"/dashboard/payments",name:"Mis pagos",svg:"/img/dashboard/payments.svg"}),(0,a.jsx)(o.Z,{href:"/dashboard/cambio",name:"Cambiar contrase\xf1a",svg:"/img/dashboard/change.svg"}),(0,a.jsx)(o.Z,{href:"/logout",name:"Salir",svg:"/img/dashboard/logout.svg"})]})}},9294:function(e,r,n){"use strict";n.d(r,{Z:function(){return u}});var a=n(5893),t=n(9898),o=n(1667),s=n(5853);function i(e){var r=e.content;return(0,a.jsxs)(o.Z,{content:r,branch:"Jefe de Rama",children:[(0,a.jsx)(s.Z,{href:"/dashboard/jefe-rama",name:"Mi rama",svg:"/img/dashboard/info.svg"}),(0,a.jsx)(s.Z,{href:"/dashboard/cambio",name:"Cambiar contrase\xf1a",svg:"/img/dashboard/change.svg"}),(0,a.jsx)(s.Z,{href:"/logout",name:"Salir",svg:"/img/dashboard/logout.svg"})]})}var c=n(7884);function d(e){var r=e.content;return(0,a.jsxs)(o.Z,{content:r,branch:"Jefe de Grupo",children:[(0,a.jsx)(s.Z,{href:"/dashboard/jefe-grupo/inscripciones",name:"Inscripciones",svg:"/img/dashboard/info.svg"}),(0,a.jsx)(s.Z,{href:"/dashboard/jefe-grupo/personal",name:"Gesti\xf3n personal",svg:"/img/dashboard/person.svg"}),(0,a.jsx)(s.Z,{href:"/dashboard/jefe-grupo/cartera",name:"Cartera Centinelas 113",svg:"/img/dashboard/wallet.svg"}),(0,a.jsx)(s.Z,{href:"/dashboard/cambio",name:"Cambiar contrase\xf1a",svg:"/img/dashboard/change.svg"}),(0,a.jsx)(s.Z,{href:"/logout",name:"Salir",svg:"/img/dashboard/logout.svg"})]})}var l=n(2461);function h(e){var r=e.content;return(0,a.jsxs)(o.Z,{content:r,branch:"Tesorero",children:[(0,a.jsx)(s.Z,{href:"/dashboard/tesorero",name:"Cartera Scouts",svg:"/img/dashboard/info.svg"}),(0,a.jsx)(s.Z,{href:"/dashboard/cambio",name:"Cambiar contrase\xf1a",svg:"/img/dashboard/change.svg"}),(0,a.jsx)(s.Z,{href:"/logout",name:"Salir",svg:"/img/dashboard/logout.svg"})]})}function u(e){var r=e.content,n=(0,t.xJ)(),o=n.user,s=n.isLoading;n.error;if(!s){l.uU[l.uU[o.roles.id-1]];switch(l.uU[l.uU[o.roles.id-1]]){case l.uU.SCOUT:return(0,a.jsx)(c.Z,{content:r});case l.uU.GRUPO:return(0,a.jsx)(d,{content:r});case l.uU.RAMA:return(0,a.jsx)(i,{content:r});case l.uU.TESORERO:return(0,a.jsx)(h,{content:r})}}return(0,a.jsx)(c.Z,{content:r})}},5853:function(e,r,n){"use strict";n.d(r,{Z:function(){return h}});var a=n(5893),t=n(1664),o=n.n(t),s=n(1163),i=n(7294),c=n(7940),d=n.n(c),l=n(1667);function h(e){var r=e.href,n=e.name,t=e.svg,c=(0,s.useRouter)(),h=(0,i.useContext)(l.l),u=c.pathname.startsWith(r)||c.asPath.startsWith(r);return(0,a.jsx)(o(),{href:r,children:(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-start ".concat(d().sidelink," ").concat(u?d().active:""),children:[t?(0,a.jsx)("img",{className:d().sideicon,src:t}):null,h?null:(0,a.jsx)("a",{children:n})]})})}},1667:function(e,r,n){"use strict";n.d(r,{l:function(){return h},Z:function(){return u}});var a=n(5893),t=n(1163),o=n(7294);var s=n(7940),i=n.n(s),c=n(9898);function d(e){var r,n=e.branchName,s=((0,t.useRouter)(),(0,c.xJ)()),d=s.user,l=s.isLoading,u=(s.error,(0,c.Sf)()),f=u.image,m=u.isLoading;if(n)r=(0,a.jsx)("p",{className:i().branch,children:n});else{var g=(0,c.ph)(),b=g.branch,_=g.isLoading;r=(0,a.jsx)("p",{className:i().branch,children:_?"Cargando...":b.nameBranch})}(0,o.useContext)(h);return(0,a.jsxs)("div",{className:i().header,children:[(0,a.jsx)("img",{className:i().image,src:m?"/img/profile-picture.png":URL.createObjectURL(f)}),(0,a.jsx)("p",{className:i().name,children:l?"Cargando...":(d.name+" "+d.lastName).toLowerCase()}),r]})}function l(e){var r=e.children;return(0,a.jsx)("div",{children:r})}var h=(0,o.createContext)({});function u(e){var r=e.content,n=e.branch,s=e.children,c=((0,t.useRouter)(),(0,o.useRef)(null)),u=(0,o.useRef)(null),f=function(){var e=function(){return{width:r?window.innerWidth:null,height:r?window.innerHeight:null}},r=!0,n=(0,o.useState)(e()),a=n[0],t=n[1];return(0,o.useEffect)((function(){var n=function(){t(e())};if(r)return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[r]),a}(),m=(f.height,f.width),g=(0,o.useState)(!1),b=g[0],_=g[1];return(0,o.useEffect)((function(){_(m<=720)}),[m]),(0,o.useEffect)((function(){c.current.style.width="100%"}),[]),(0,a.jsx)(h.Provider,{value:b,children:(0,a.jsxs)("div",{className:"d-flex",children:[(0,a.jsxs)("div",{className:"".concat(i().sidebar," "),ref:c,children:[(0,a.jsx)(d,{branchName:n}),(0,a.jsx)(l,{children:s})]}),(0,a.jsx)("div",{className:"".concat(i().content," flex-fill"),ref:u,children:r})]})})}},2461:function(e,r,n){"use strict";n.d(r,{EZ:function(){return o},Sv:function(){return t},uU:function(){return a}});var a,t=function(e,r){switch(r){case a.SCOUT:e.push("/dashboard/info","/dashboard",{shallow:!0});break;case a.RAMA:e.push("/dashboard/jefe-rama","/dashboard",{shallow:!0});break;case a.GRUPO:e.push("/dashboard/jefe-grupo/inscripciones","/dashboard",{shallow:!0});break;case a.TESORERO:e.push("/dashboard/tesorero","/dashboard",{shallow:!0});break;default:e.push("/dashboard/info","/dashboard",{shallow:!0})}};function o(){fetch("http://localhost:4000/api/payments/generateCSV/1",{method:"GET",headers:new Headers({"Referrer-Policy":"origin-when-cross-origin",Authorization:"Bearer "+localStorage.getItem("auth_token"),"Access-Control-Allow-Origin":"".concat("http://localhost:3000")})}).then((function(e){return e.blob()})).then((function(e){var r=window.URL.createObjectURL(e);Object.assign(document.createElement("a"),{target:"_blank",href:r,download:"Historial de pagos-".concat((new Date).toISOString().split("T")[0],".csv")}).click(),setTimeout((function(){window.URL.revokeObjectURL(r)}),100)}))}!function(e){e[e.SCOUT=0]="SCOUT",e[e.TESORERO=1]="TESORERO",e[e.RAMA=2]="RAMA",e[e.GRUPO=3]="GRUPO",e[e.ADMIN=4]="ADMIN"}(a||(a={}))},4181:function(e,r,n){"use strict";var a=n(7294),t=n(1163),o=n.n(t),s=n(9898);r.Z=function(e,r,n){return function(t){var i=(0,s.xJ)(),c=i.user,d=i.isLoading,l=i.error;return(0,a.useEffect)((function(){var e=window.location?window.location:null;d&&l?o().replace("/login?r=".concat(e.pathname+encodeURIComponent(e.search)),"/login",{shallow:!0}):d||c.status?r&&!d&&(n&&r!=c.roles.id-1||r>c.roles.id-1)&&o().push("/dashboard"):o().push("/logout")}),[d,l]),(0,a.createElement)(e,t,null)}}},8421:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return _}});var a=n(5893),t=n(1587),o=n(7294),s=n(8514),i=n.n(s),c=n(960),d=n.n(c),l=n(1664),h=n.n(l),u=n(7630),f=n.n(u);function m(){var e={columns:[{label:"Nombre",field:"name",sort:"asc",width:200},{label:"Adiestramiento",field:"level",sort:"asc",width:100},{label:"Cargo",field:"charge",sort:"asc",width:100},{label:"Rama",field:"branches",sort:"asc",width:100},{label:"Acciones",field:"actions",sort:"asc",width:150}],rows:[]},r=(0,o.useState)(e),s=r[0],c=r[1],l=(0,o.useState)(!0),u=l[0],m=l[1],g=n(6455),b=f()(g);return(0,o.useEffect)((function(){fetch("".concat("http://localhost:4000","/api/personalDetails"),{mode:"cors",method:"GET",headers:{"Referrer-Policy":"origin-when-cross-origin","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("auth_token"),"Access-Control-Allow-Origin":"".concat("http://localhost:3000")}}).then((function(e){return e.json().then((function(r){return e.ok?Promise.resolve(r):Promise.reject(r)}))})).then((function(r){var n=r.data;n=n.map((function(e){var r={name:e.name,level:e.personalDetails.level,charge:e.personalDetails.charge,branches:e.branches?e.branches.nameBranch:"",actions:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h(),{href:"/dashboard/jefe-grupo/personal/".concat(e.id),children:(0,a.jsx)("a",{children:(0,a.jsx)("img",{className:d().icon,src:"/img/dashboard/eye.svg"})})}),(0,a.jsx)(h(),{href:"/dashboard/jefe-grupo/personal/editar/".concat(e.id),children:(0,a.jsx)("a",{children:(0,a.jsx)("img",{className:d().icon,src:"/img/dashboard/pencil.svg"})})}),(0,a.jsx)(h(),{href:"/dashboard/jefe-grupo/personal/",children:(0,a.jsx)("a",{children:(0,a.jsx)("img",{className:d().icon,src:"/img/dashboard/trash.svg",onClick:function(){fetch("".concat("http://localhost:4000","/api/users/").concat(e.id),{method:"DELETE",headers:{"Referrer-Policy":"origin-when-cross-origin",Authorization:"Bearer "+localStorage.getItem("auth_token"),"Access-Control-Allow-Origin":"".concat("http://localhost:3000")}}).then((function(e){return e.json().then((function(r){return e.ok?Promise.resolve(r):Promise.reject(r)}))})).then((function(e){b.fire({icon:"success",title:"Datos eliminados!",text:"Los datos eliminados correctamente",confirmButtonColor:"#31B411",confirmButtonText:"Continuar"}).then((function(e){e&&(window.location.href="/dashboard/jefe-grupo/personal/")}))}))}})})})]})};return r})),e.rows=n,c(e),m(!1)}))}),[]),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"".concat(i().text_title," p-5"),children:"Gesti\xf3n de personal administrativo Grupo Scout Centinelas 113"})}),u?(0,a.jsx)("div",{className:"row col-12 mt-5 justify-content-center",children:"Cargando Informaci\xf3n..."}):(0,a.jsx)("div",{className:"".concat(i().text_data," row justify-content-center py-3"),children:(0,a.jsxs)("div",{className:"".concat(i().container," py-5 w-100"),id:"example",children:[(0,a.jsx)("button",{type:"button",className:"".concat(i().boton),children:(0,a.jsx)("a",{className:"".concat(i().letra),href:"/dashboard/jefe-grupo/personal/agregar/",children:"Agregar personal"})}),(0,a.jsx)(t.g0K,{striped:!0,bordered:!0,hover:!0,small:!0,responsiveSm:!0,responsiveMd:!0,responsiveLg:!0,responsiveXl:!0,fixed:!0,noBottomColumns:!0,data:s,entriesLabel:"Mostrar entradas",infoLabel:["Mostrando","hasta","de","registros"],paginationLabel:["Anterior","Siguiente"],searchLabel:"Buscar",noRecordsFoundLabel:"No se han encontrado registros"})]})})]})}var g=n(9294),b=n(2461),_=(0,n(4181).Z)((function(){var e=(0,a.jsx)(m,{});return(0,a.jsx)(g.Z,{content:e})}),b.uU.GRUPO,!0)},960:function(e){e.exports={icon:"JefeRama_icon__6KOfV",icon_:"JefeRama_icon___fQrZt"}},7940:function(e){e.exports={sidebar:"Slidebar_sidebar__pw5I_",sidelink:"Slidebar_sidelink__I0n_O",active:"Slidebar_active__BkFah",closebtn:"Slidebar_closebtn__Q2ruM",openbtn:"Slidebar_openbtn__WaRF4",content:"Slidebar_content__s2yv4",sideicon:"Slidebar_sideicon__ypeH_",header:"Slidebar_header__JuoDb",image:"Slidebar_image__V0t9C",name:"Slidebar_name__qFgGz",branch:"Slidebar_branch__qdB8B"}},8514:function(e){e.exports={container:"Administrator_container__r_Nfr",text_data:"Administrator_text_data__DfrXD",boton:"Administrator_boton__aoVJX",letra:"Administrator_letra__WZX_0",text_title:"Administrator_text_title__9k5C5",editarB:"Administrator_editarB__5HYuS",contenedor:"Administrator_contenedor__v1BrC",editarI:"Administrator_editarI__GVWyd",mostrar:"Administrator_mostrar__A1mHr",ocultarB:"Administrator_ocultarB__OWbZ7",mostrarB:"Administrator_mostrarB__Ao266",contenedor_btns:"Administrator_contenedor_btns__j5Zfx",label2:"Administrator_label2__Jqt3T",inputObser:"Administrator_inputObser__YTDGh"}}},function(e){e.O(0,[1427,4711,698,9774,2888,179],(function(){return r=7002,e(e.s=r);var r}));var r=e.O();_N_E=r}]);