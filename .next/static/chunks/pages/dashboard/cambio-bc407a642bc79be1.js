(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9394],{3206:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/cambio",function(){return a(2758)}])},9373:function(e,n,a){"use strict";a.d(n,{Z:function(){return d}});var r=a(5893),t=a(7294),s=a(1136),o=a.n(s),i=a(7630),c=a.n(i),l=a(1163);function d(e){var n=e.token,s=(0,l.useRouter)(),i=(0,t.useRef)(null),d=(0,t.useRef)(null),u=a(6455),h=c()(u),f=((0,t.useRef)(null),(0,t.useRef)(null)),m=(0,t.useState)(!0),g=m[0],b=m[1],p=(0,t.useState)(!0),v=p[0],x=p[1];return(0,t.useEffect)((function(){n&&(localStorage.setItem("auth_token",n),s.push("/cambio"))})),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:o().containerp,children:(0,r.jsx)("div",{className:"row",children:(0,r.jsxs)("div",{className:"col-12 borde",children:[(0,r.jsx)("div",{className:o().title,children:(0,r.jsx)("p",{children:"\xa1Cambia tu contrase\xf1a!"})}),(0,r.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),localStorage.getItem("auth_token")){if(""!==d.current.value&&""!==i.current.value)if(i.current.value!==d.current.value)i.current.value="",d.current.value="",u.fire({icon:"error",title:"\xa1Cuidado!",text:"Las contrase\xf1as no coinciden",confirmButtonColor:"#E01C1C",confirmButtonText:"Reintentar"});else{var n={password:i.current.value};fetch("".concat("http://localhost:4000","/api/auth/reset-password"),{mode:"cors",method:"PUT",headers:{"Referrer-Policy":"origin-when-cross-origin",Authorization:"Bearer "+localStorage.getItem("auth_token"),"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000")},body:JSON.stringify(n)}).then((function(e){return e.json().then((function(n){return e.ok?Promise.resolve(n):Promise.reject(n)}))})).then((function(){i.current.readOnly=!0,d.current.readOnly=!0,f.current.style.display="none",i.current.value="",d.current.value="",h.fire({icon:"success",title:"Contrase\xf1a actualizada!",text:"Tu contrase\xf1a fue actualizada correctamente",confirmButtonColor:"#31B411",confirmButtonText:"Continuar"}).then((function(e){e.isConfirmed&&s.push("/login")}))})).catch((function(e){h.fire({icon:"error",title:(0,r.jsx)("p",{children:"Hay errores"}),text:e.message,showConfirmButton:!1,showDenyButton:!0,denyButtonText:"Cerrar"})}))}}else h.fire({icon:"error",title:"No estas autenticado",text:"Debes iniciar sesi\xf3n o entrar al enlace de recuperar tu contrase\xf1a",showConfirmButton:!1,showDenyButton:!0,denyButtonText:"Cerrar"}).then((function(){s.push("/login")}))},children:(0,r.jsxs)("div",{className:o().container,children:[(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"input-group mb-3",children:[(0,r.jsx)("input",{type:"password",required:!0,minLength:8,id:"password",className:"".concat(o().pass," form-control "),ref:i,placeholder:"Contrase\xf1a nueva","aria-label":"Recipient's username","aria-describedby":"button-addon2"}),(0,r.jsx)("div",{className:"input-group-append",children:(0,r.jsx)("button",{className:"".concat(o().eyes," btn btn-outline-secondar "),onClick:function(){"password"===i.current.type?(i.current.type="text",b(!1)):(i.current.type="password",b(!0))},type:"button",id:"button-addon2",children:g?(0,r.jsxs)("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-eye-slash",fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"}),(0,r.jsx)("path",{d:"M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299l.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"}),(0,r.jsx)("path",{d:"M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709z"}),(0,r.jsx)("path",{"fill-rule":"evenodd",d:"M13.646 14.354l-12-12 .708-.708 12 12-.708.708z"})]}):(0,r.jsxs)("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-eye",fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{"fill-rule":"evenodd",d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.134 13.134 0 0 0 1.66 2.043C4.12 11.332 5.88 12.5 8 12.5c2.12 0 3.879-1.168 5.168-2.457A13.134 13.134 0 0 0 14.828 8a13.133 13.133 0 0 0-1.66-2.043C11.879 4.668 10.119 3.5 8 3.5c-2.12 0-3.879 1.168-5.168 2.457A13.133 13.133 0 0 0 1.172 8z"}),(0,r.jsx)("path",{"fill-rule":"evenodd",d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"})]})})})]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"input-group mb-3",children:[(0,r.jsx)("input",{type:"password",required:!0,minLength:8,id:"confirmpassword",className:"".concat(o().pass," form-control "),pattern:"[A-z]{4-16}",ref:d,placeholder:"Confirmar contrase\xf1a nueva","aria-label":"Recipient's username","aria-describedby":"button-addon2"}),(0,r.jsx)("div",{className:"input-group-append",children:(0,r.jsx)("button",{className:"".concat(o().eyes," btn btn-outline-secondar "),onClick:function(){"password"==d.current.type?(d.current.type="text",x(!1)):(d.current.type="password",x(!0))},type:"button",id:"button-addon2",children:v?(0,r.jsxs)("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-eye-slash",fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"}),(0,r.jsx)("path",{d:"M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299l.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"}),(0,r.jsx)("path",{d:"M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709z"}),(0,r.jsx)("path",{"fill-rule":"evenodd",d:"M13.646 14.354l-12-12 .708-.708 12 12-.708.708z"})]}):(0,r.jsxs)("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-eye",fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{"fill-rule":"evenodd",d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.134 13.134 0 0 0 1.66 2.043C4.12 11.332 5.88 12.5 8 12.5c2.12 0 3.879-1.168 5.168-2.457A13.134 13.134 0 0 0 14.828 8a13.133 13.133 0 0 0-1.66-2.043C11.879 4.668 10.119 3.5 8 3.5c-2.12 0-3.879 1.168-5.168 2.457A13.133 13.133 0 0 0 1.172 8z"}),(0,r.jsx)("path",{"fill-rule":"evenodd",d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"})]})})})]})}),(0,r.jsx)("div",{className:o().button,children:(0,r.jsx)("button",{type:"submit",id:"changepassword",className:"btn btn-danger",ref:f,children:" Cambiar contrase\xf1a "})})]})})]})})})})}},7884:function(e,n,a){"use strict";a.d(n,{Z:function(){return o}});var r=a(5893),t=a(1667),s=a(5853);function o(e){var n=e.content;return(0,r.jsxs)(t.Z,{content:n,children:[(0,r.jsx)(s.Z,{href:"/dashboard/info",name:"Informaci\xf3n personal",svg:"/img/dashboard/info.svg"}),(0,r.jsx)(s.Z,{href:"/dashboard/progress",name:"Mi progreso",svg:"/img/dashboard/progress.svg"}),(0,r.jsx)(s.Z,{href:"/dashboard/payments",name:"Mis pagos",svg:"/img/dashboard/payments.svg"}),(0,r.jsx)(s.Z,{href:"/dashboard/cambio",name:"Cambiar contrase\xf1a",svg:"/img/dashboard/change.svg"}),(0,r.jsx)(s.Z,{href:"/logout",name:"Salir",svg:"/img/dashboard/logout.svg"})]})}},9294:function(e,n,a){"use strict";a.d(n,{Z:function(){return h}});var r=a(5893),t=a(9898),s=a(1667),o=a(5853);function i(e){var n=e.content;return(0,r.jsxs)(s.Z,{content:n,branch:"Jefe de Rama",children:[(0,r.jsx)(o.Z,{href:"/dashboard/jefe-rama",name:"Mi rama",svg:"/img/dashboard/info.svg"}),(0,r.jsx)(o.Z,{href:"/dashboard/cambio",name:"Cambiar contrase\xf1a",svg:"/img/dashboard/change.svg"}),(0,r.jsx)(o.Z,{href:"/logout",name:"Salir",svg:"/img/dashboard/logout.svg"})]})}var c=a(7884);function l(e){var n=e.content;return(0,r.jsxs)(s.Z,{content:n,branch:"Jefe de Grupo",children:[(0,r.jsx)(o.Z,{href:"/dashboard/jefe-grupo/inscripciones",name:"Inscripciones",svg:"/img/dashboard/info.svg"}),(0,r.jsx)(o.Z,{href:"/dashboard/jefe-grupo/personal",name:"Gesti\xf3n personal",svg:"/img/dashboard/person.svg"}),(0,r.jsx)(o.Z,{href:"/dashboard/jefe-grupo/cartera",name:"Cartera Centinelas 113",svg:"/img/dashboard/wallet.svg"}),(0,r.jsx)(o.Z,{href:"/dashboard/cambio",name:"Cambiar contrase\xf1a",svg:"/img/dashboard/change.svg"}),(0,r.jsx)(o.Z,{href:"/logout",name:"Salir",svg:"/img/dashboard/logout.svg"})]})}var d=a(2461);function u(e){var n=e.content;return(0,r.jsxs)(s.Z,{content:n,branch:"Tesorero",children:[(0,r.jsx)(o.Z,{href:"/dashboard/tesorero",name:"Cartera Scouts",svg:"/img/dashboard/info.svg"}),(0,r.jsx)(o.Z,{href:"/dashboard/cambio",name:"Cambiar contrase\xf1a",svg:"/img/dashboard/change.svg"}),(0,r.jsx)(o.Z,{href:"/logout",name:"Salir",svg:"/img/dashboard/logout.svg"})]})}function h(e){var n=e.content,a=(0,t.xJ)(),s=a.user,o=a.isLoading;a.error;if(!o){d.uU[d.uU[s.roles.id-1]];switch(d.uU[d.uU[s.roles.id-1]]){case d.uU.SCOUT:return(0,r.jsx)(c.Z,{content:n});case d.uU.GRUPO:return(0,r.jsx)(l,{content:n});case d.uU.RAMA:return(0,r.jsx)(i,{content:n});case d.uU.TESORERO:return(0,r.jsx)(u,{content:n})}}return(0,r.jsx)(c.Z,{content:n})}},5853:function(e,n,a){"use strict";a.d(n,{Z:function(){return u}});var r=a(5893),t=a(1664),s=a.n(t),o=a(1163),i=a(7294),c=a(7940),l=a.n(c),d=a(1667);function u(e){var n=e.href,a=e.name,t=e.svg,c=(0,o.useRouter)(),u=(0,i.useContext)(d.l),h=c.pathname.startsWith(n)||c.asPath.startsWith(n);return(0,r.jsx)(s(),{href:n,children:(0,r.jsxs)("div",{className:"d-flex align-items-center justify-content-start ".concat(l().sidelink," ").concat(h?l().active:""),children:[t?(0,r.jsx)("img",{className:l().sideicon,src:t}):null,u?null:(0,r.jsx)("a",{children:a})]})})}},1667:function(e,n,a){"use strict";a.d(n,{l:function(){return u},Z:function(){return h}});var r=a(5893),t=a(1163),s=a(7294);var o=a(7940),i=a.n(o),c=a(9898);function l(e){var n,a=e.branchName,o=((0,t.useRouter)(),(0,c.xJ)()),l=o.user,d=o.isLoading,h=(o.error,(0,c.Sf)()),f=h.image,m=h.isLoading;if(a)n=(0,r.jsx)("p",{className:i().branch,children:a});else{var g=(0,c.ph)(),b=g.branch,p=g.isLoading;n=(0,r.jsx)("p",{className:i().branch,children:p?"Cargando...":b.nameBranch})}(0,s.useContext)(u);return(0,r.jsxs)("div",{className:i().header,children:[(0,r.jsx)("img",{className:i().image,src:m?"/img/profile-picture.png":URL.createObjectURL(f)}),(0,r.jsx)("p",{className:i().name,children:d?"Cargando...":(l.name+" "+l.lastName).toLowerCase()}),n]})}function d(e){var n=e.children;return(0,r.jsx)("div",{children:n})}var u=(0,s.createContext)({});function h(e){var n=e.content,a=e.branch,o=e.children,c=((0,t.useRouter)(),(0,s.useRef)(null)),h=(0,s.useRef)(null),f=function(){var e=function(){return{width:n?window.innerWidth:null,height:n?window.innerHeight:null}},n=!0,a=(0,s.useState)(e()),r=a[0],t=a[1];return(0,s.useEffect)((function(){var a=function(){t(e())};if(n)return window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}}),[n]),r}(),m=(f.height,f.width),g=(0,s.useState)(!1),b=g[0],p=g[1];return(0,s.useEffect)((function(){p(m<=720)}),[m]),(0,s.useEffect)((function(){c.current.style.width="100%"}),[]),(0,r.jsx)(u.Provider,{value:b,children:(0,r.jsxs)("div",{className:"d-flex",children:[(0,r.jsxs)("div",{className:"".concat(i().sidebar," "),ref:c,children:[(0,r.jsx)(l,{branchName:a}),(0,r.jsx)(d,{children:o})]}),(0,r.jsx)("div",{className:"".concat(i().content," flex-fill"),ref:h,children:n})]})})}},2461:function(e,n,a){"use strict";a.d(n,{EZ:function(){return s},Sv:function(){return t},uU:function(){return r}});var r,t=function(e,n){switch(n){case r.SCOUT:e.push("/dashboard/info","/dashboard",{shallow:!0});break;case r.RAMA:e.push("/dashboard/jefe-rama","/dashboard",{shallow:!0});break;case r.GRUPO:e.push("/dashboard/jefe-grupo/inscripciones","/dashboard",{shallow:!0});break;case r.TESORERO:e.push("/dashboard/tesorero","/dashboard",{shallow:!0});break;default:e.push("/dashboard/info","/dashboard",{shallow:!0})}};function s(){fetch("http://localhost:4000/api/payments/generateCSV/1",{method:"GET",headers:new Headers({"Referrer-Policy":"origin-when-cross-origin",Authorization:"Bearer "+localStorage.getItem("auth_token"),"Access-Control-Allow-Origin":"".concat("http://localhost:3000")})}).then((function(e){return e.blob()})).then((function(e){var n=window.URL.createObjectURL(e);Object.assign(document.createElement("a"),{target:"_blank",href:n,download:"Historial de pagos-".concat((new Date).toISOString().split("T")[0],".csv")}).click(),setTimeout((function(){window.URL.revokeObjectURL(n)}),100)}))}!function(e){e[e.SCOUT=0]="SCOUT",e[e.TESORERO=1]="TESORERO",e[e.RAMA=2]="RAMA",e[e.GRUPO=3]="GRUPO",e[e.ADMIN=4]="ADMIN"}(r||(r={}))},4181:function(e,n,a){"use strict";var r=a(7294),t=a(1163),s=a.n(t),o=a(9898);n.Z=function(e,n,a){return function(t){var i=(0,o.xJ)(),c=i.user,l=i.isLoading,d=i.error;return(0,r.useEffect)((function(){var e=window.location?window.location:null;l&&d?s().replace("/login?r=".concat(e.pathname+encodeURIComponent(e.search)),"/login",{shallow:!0}):l||c.status?n&&!l&&(a&&n!=c.roles.id-1||n>c.roles.id-1)&&s().push("/dashboard"):s().push("/logout")}),[l,d]),(0,r.createElement)(e,t,null)}}},2758:function(e,n,a){"use strict";a.r(n);var r=a(5893),t=a(9373),s=a(9294),o=a(2461),i=a(4181);n.default=(0,i.Z)((function(){var e=(0,r.jsx)(t.Z,{});return(0,r.jsx)(s.Z,{content:e})}),o.uU.SCOUT)},1136:function(e){e.exports={title:"change_title__h6SLj",pass:"change_pass__3wRQU",container:"change_container__jIo5F",containerp:"change_containerp__2if_5",button:"change_button__sz4lN",eyes:"change_eyes__tcbQN",alert:"change_alert__8BcQA"}},7940:function(e){e.exports={sidebar:"Slidebar_sidebar__pw5I_",sidelink:"Slidebar_sidelink__I0n_O",active:"Slidebar_active__BkFah",closebtn:"Slidebar_closebtn__Q2ruM",openbtn:"Slidebar_openbtn__WaRF4",content:"Slidebar_content__s2yv4",sideicon:"Slidebar_sideicon__ypeH_",header:"Slidebar_header__JuoDb",image:"Slidebar_image__V0t9C",name:"Slidebar_name__qFgGz",branch:"Slidebar_branch__qdB8B"}}},function(e){e.O(0,[4711,9774,2888,179],(function(){return n=3206,e(e.s=n);var n}));var n=e.O();_N_E=n}]);