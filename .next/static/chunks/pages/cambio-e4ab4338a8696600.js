(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3813],{2258:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cambio",function(){return n(3354)}])},9373:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var a=n(5893),r=n(7294),s=n(1136),o=n.n(s),i=n(7630),c=n.n(i),l=n(1163);function u(e){var t=e.token,s=(0,l.useRouter)(),i=(0,r.useRef)(null),u=(0,r.useRef)(null),d=n(6455),h=c()(d),p=((0,r.useRef)(null),(0,r.useRef)(null)),f=(0,r.useState)(!0),m=f[0],x=f[1],v=(0,r.useState)(!0),w=v[0],b=v[1];return(0,r.useEffect)((function(){t&&(localStorage.setItem("auth_token",t),s.push("/cambio"))})),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:o().containerp,children:(0,a.jsx)("div",{className:"row",children:(0,a.jsxs)("div",{className:"col-12 borde",children:[(0,a.jsx)("div",{className:o().title,children:(0,a.jsx)("p",{children:"\xa1Cambia tu contrase\xf1a!"})}),(0,a.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),localStorage.getItem("auth_token")){if(""!==u.current.value&&""!==i.current.value)if(i.current.value!==u.current.value)i.current.value="",u.current.value="",d.fire({icon:"error",title:"\xa1Cuidado!",text:"Las contrase\xf1as no coinciden",confirmButtonColor:"#E01C1C",confirmButtonText:"Reintentar"});else{var t={password:i.current.value};fetch("".concat("http://localhost:4000","/api/auth/reset-password"),{mode:"cors",method:"PUT",headers:{"Referrer-Policy":"origin-when-cross-origin",Authorization:"Bearer "+localStorage.getItem("auth_token"),"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000")},body:JSON.stringify(t)}).then((function(e){return e.json().then((function(t){return e.ok?Promise.resolve(t):Promise.reject(t)}))})).then((function(){i.current.readOnly=!0,u.current.readOnly=!0,p.current.style.display="none",i.current.value="",u.current.value="",h.fire({icon:"success",title:"Contrase\xf1a actualizada!",text:"Tu contrase\xf1a fue actualizada correctamente",confirmButtonColor:"#31B411",confirmButtonText:"Continuar"}).then((function(e){e.isConfirmed&&s.push("/login")}))})).catch((function(e){h.fire({icon:"error",title:(0,a.jsx)("p",{children:"Hay errores"}),text:e.message,showConfirmButton:!1,showDenyButton:!0,denyButtonText:"Cerrar"})}))}}else h.fire({icon:"error",title:"No estas autenticado",text:"Debes iniciar sesi\xf3n o entrar al enlace de recuperar tu contrase\xf1a",showConfirmButton:!1,showDenyButton:!0,denyButtonText:"Cerrar"}).then((function(){s.push("/login")}))},children:(0,a.jsxs)("div",{className:o().container,children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"input-group mb-3",children:[(0,a.jsx)("input",{type:"password",required:!0,minLength:8,id:"password",className:"".concat(o().pass," form-control "),ref:i,placeholder:"Contrase\xf1a nueva","aria-label":"Recipient's username","aria-describedby":"button-addon2"}),(0,a.jsx)("div",{className:"input-group-append",children:(0,a.jsx)("button",{className:"".concat(o().eyes," btn btn-outline-secondar "),onClick:function(){"password"===i.current.type?(i.current.type="text",x(!1)):(i.current.type="password",x(!0))},type:"button",id:"button-addon2",children:m?(0,a.jsxs)("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-eye-slash",fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"}),(0,a.jsx)("path",{d:"M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299l.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"}),(0,a.jsx)("path",{d:"M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709z"}),(0,a.jsx)("path",{"fill-rule":"evenodd",d:"M13.646 14.354l-12-12 .708-.708 12 12-.708.708z"})]}):(0,a.jsxs)("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-eye",fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{"fill-rule":"evenodd",d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.134 13.134 0 0 0 1.66 2.043C4.12 11.332 5.88 12.5 8 12.5c2.12 0 3.879-1.168 5.168-2.457A13.134 13.134 0 0 0 14.828 8a13.133 13.133 0 0 0-1.66-2.043C11.879 4.668 10.119 3.5 8 3.5c-2.12 0-3.879 1.168-5.168 2.457A13.133 13.133 0 0 0 1.172 8z"}),(0,a.jsx)("path",{"fill-rule":"evenodd",d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"})]})})})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"input-group mb-3",children:[(0,a.jsx)("input",{type:"password",required:!0,minLength:8,id:"confirmpassword",className:"".concat(o().pass," form-control "),pattern:"[A-z]{4-16}",ref:u,placeholder:"Confirmar contrase\xf1a nueva","aria-label":"Recipient's username","aria-describedby":"button-addon2"}),(0,a.jsx)("div",{className:"input-group-append",children:(0,a.jsx)("button",{className:"".concat(o().eyes," btn btn-outline-secondar "),onClick:function(){"password"==u.current.type?(u.current.type="text",b(!1)):(u.current.type="password",b(!0))},type:"button",id:"button-addon2",children:w?(0,a.jsxs)("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-eye-slash",fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"}),(0,a.jsx)("path",{d:"M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299l.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"}),(0,a.jsx)("path",{d:"M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709z"}),(0,a.jsx)("path",{"fill-rule":"evenodd",d:"M13.646 14.354l-12-12 .708-.708 12 12-.708.708z"})]}):(0,a.jsxs)("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-eye",fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{"fill-rule":"evenodd",d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.134 13.134 0 0 0 1.66 2.043C4.12 11.332 5.88 12.5 8 12.5c2.12 0 3.879-1.168 5.168-2.457A13.134 13.134 0 0 0 14.828 8a13.133 13.133 0 0 0-1.66-2.043C11.879 4.668 10.119 3.5 8 3.5c-2.12 0-3.879 1.168-5.168 2.457A13.133 13.133 0 0 0 1.172 8z"}),(0,a.jsx)("path",{"fill-rule":"evenodd",d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"})]})})})]})}),(0,a.jsx)("div",{className:o().button,children:(0,a.jsx)("button",{type:"submit",id:"changepassword",className:"btn btn-danger",ref:p,children:" Cambiar contrase\xf1a "})})]})})]})})})})}},3354:function(e,t,n){"use strict";n.r(t);var a=n(5893),r=n(9373);t.default=function(){return(0,a.jsx)(r.Z,{})}},1136:function(e){e.exports={title:"change_title__h6SLj",pass:"change_pass__3wRQU",container:"change_container__jIo5F",containerp:"change_containerp__2if_5",button:"change_button__sz4lN",eyes:"change_eyes__tcbQN",alert:"change_alert__8BcQA"}}},function(e){e.O(0,[4711,9774,2888,179],(function(){return t=2258,e(e.s=t);var t}));var t=e.O();_N_E=t}]);