(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4224],{7884:function(e,n,a){"use strict";a.d(n,{Z:function(){return o}});var r=a(5893),s=a(1667),t=a(5853);function o(e){var n=e.content;return(0,r.jsxs)(s.Z,{content:n,children:[(0,r.jsx)(t.Z,{href:"/dashboard/info",name:"Informaci\xf3n personal",svg:"/img/dashboard/info.svg"}),(0,r.jsx)(t.Z,{href:"/dashboard/progress",name:"Mi progreso",svg:"/img/dashboard/progress.svg"}),(0,r.jsx)(t.Z,{href:"/dashboard/payments",name:"Mis pagos",svg:"/img/dashboard/payments.svg"}),(0,r.jsx)(t.Z,{href:"/dashboard/cambio",name:"Cambiar contrase\xf1a",svg:"/img/dashboard/change.svg"}),(0,r.jsx)(t.Z,{href:"/logout",name:"Salir",svg:"/img/dashboard/logout.svg"})]})}},9294:function(e,n,a){"use strict";a.d(n,{Z:function(){return h}});var r=a(5893),s=a(9898),t=a(1667),o=a(5853);function c(e){var n=e.content;return(0,r.jsxs)(t.Z,{content:n,branch:"Jefe de Rama",children:[(0,r.jsx)(o.Z,{href:"/dashboard/jefe-rama",name:"Mi rama",svg:"/img/dashboard/info.svg"}),(0,r.jsx)(o.Z,{href:"/dashboard/cambio",name:"Cambiar contrase\xf1a",svg:"/img/dashboard/change.svg"}),(0,r.jsx)(o.Z,{href:"/logout",name:"Salir",svg:"/img/dashboard/logout.svg"})]})}var l=a(7884);function i(e){var n=e.content;return(0,r.jsxs)(t.Z,{content:n,branch:"Jefe de Grupo",children:[(0,r.jsx)(o.Z,{href:"/dashboard/jefe-grupo/inscripciones",name:"Inscripciones",svg:"/img/dashboard/info.svg"}),(0,r.jsx)(o.Z,{href:"/dashboard/jefe-grupo/personal",name:"Gesti\xf3n personal",svg:"/img/dashboard/person.svg"}),(0,r.jsx)(o.Z,{href:"/dashboard/jefe-grupo/cartera",name:"Cartera Centinelas 113",svg:"/img/dashboard/wallet.svg"}),(0,r.jsx)(o.Z,{href:"/dashboard/cambio",name:"Cambiar contrase\xf1a",svg:"/img/dashboard/change.svg"}),(0,r.jsx)(o.Z,{href:"/logout",name:"Salir",svg:"/img/dashboard/logout.svg"})]})}var u=a(2461);function d(e){var n=e.content;return(0,r.jsxs)(t.Z,{content:n,branch:"Tesorero",children:[(0,r.jsx)(o.Z,{href:"/dashboard/tesorero",name:"Cartera Scouts",svg:"/img/dashboard/info.svg"}),(0,r.jsx)(o.Z,{href:"/dashboard/cambio",name:"Cambiar contrase\xf1a",svg:"/img/dashboard/change.svg"}),(0,r.jsx)(o.Z,{href:"/logout",name:"Salir",svg:"/img/dashboard/logout.svg"})]})}function h(e){var n=e.content,a=(0,s.xJ)(),t=a.user,o=a.isLoading;a.error;if(!o){u.uU[u.uU[t.roles.id-1]];switch(u.uU[u.uU[t.roles.id-1]]){case u.uU.SCOUT:return(0,r.jsx)(l.Z,{content:n});case u.uU.GRUPO:return(0,r.jsx)(i,{content:n});case u.uU.RAMA:return(0,r.jsx)(c,{content:n});case u.uU.TESORERO:return(0,r.jsx)(d,{content:n})}}return(0,r.jsx)(l.Z,{content:n})}},5853:function(e,n,a){"use strict";a.d(n,{Z:function(){return d}});var r=a(5893),s=a(1664),t=a.n(s),o=a(1163),c=a(7294),l=a(7940),i=a.n(l),u=a(1667);function d(e){var n=e.href,a=e.name,s=e.svg,l=(0,o.useRouter)(),d=(0,c.useContext)(u.l),h=l.pathname.startsWith(n)||l.asPath.startsWith(n);return(0,r.jsx)(t(),{href:n,children:(0,r.jsxs)("div",{className:"d-flex align-items-center justify-content-start ".concat(i().sidelink," ").concat(h?i().active:""),children:[s?(0,r.jsx)("img",{className:i().sideicon,src:s}):null,d?null:(0,r.jsx)("a",{children:a})]})})}},1667:function(e,n,a){"use strict";a.d(n,{l:function(){return d},Z:function(){return h}});var r=a(5893),s=a(1163),t=a(7294);var o=a(7940),c=a.n(o),l=a(9898);function i(e){var n,a=e.branchName,o=((0,s.useRouter)(),(0,l.xJ)()),i=o.user,u=o.isLoading,h=(o.error,(0,l.Sf)()),m=h.image,f=h.isLoading;if(a)n=(0,r.jsx)("p",{className:c().branch,children:a});else{var g=(0,l.ph)(),p=g.branch,b=g.isLoading;n=(0,r.jsx)("p",{className:c().branch,children:b?"Cargando...":p.nameBranch})}(0,t.useContext)(d);return(0,r.jsxs)("div",{className:c().header,children:[(0,r.jsx)("img",{className:c().image,src:f?"/img/profile-picture.png":URL.createObjectURL(m)}),(0,r.jsx)("p",{className:c().name,children:u?"Cargando...":(i.name+" "+i.lastName).toLowerCase()}),n]})}function u(e){var n=e.children;return(0,r.jsx)("div",{children:n})}var d=(0,t.createContext)({});function h(e){var n=e.content,a=e.branch,o=e.children,l=((0,s.useRouter)(),(0,t.useRef)(null)),h=(0,t.useRef)(null),m=function(){var e=function(){return{width:n?window.innerWidth:null,height:n?window.innerHeight:null}},n=!0,a=(0,t.useState)(e()),r=a[0],s=a[1];return(0,t.useEffect)((function(){var a=function(){s(e())};if(n)return window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}}),[n]),r}(),f=(m.height,m.width),g=(0,t.useState)(!1),p=g[0],b=g[1];return(0,t.useEffect)((function(){b(f<=720)}),[f]),(0,t.useEffect)((function(){l.current.style.width="100%"}),[]),(0,r.jsx)(d.Provider,{value:p,children:(0,r.jsxs)("div",{className:"d-flex",children:[(0,r.jsxs)("div",{className:"".concat(c().sidebar," "),ref:l,children:[(0,r.jsx)(i,{branchName:a}),(0,r.jsx)(u,{children:o})]}),(0,r.jsx)("div",{className:"".concat(c().content," flex-fill"),ref:h,children:n})]})})}},8456:function(e,n,a){"use strict";a.d(n,{Z:function(){return h}});var r=a(1799),s=a(9396),t=a(5893),o=a(1449),c=a.n(o),l=a(7294),i=a(7630),u=a.n(i),d=a(1163);function h(e){var n=e.id,o=e.paymentId,i=function(){I.current.style.visibility="visible",L.current.style.visibility="visible",G(z())},h=function(){I.current.style.visibility="visible",L.current.style.visibility="visible",J(z(),n,o)},m=function(e){var n=0;return e.paymentConcepts.forEach((function(e){n+=e.amount})),n},f=function(e){var n=null;return B.forEach((function(a){a.name===e&&(n=a.ref)})),n},g=(0,d.useRouter)(),p=(0,l.useRef)(null),b=(0,l.useRef)(null),x=(0,l.useRef)(null),j=(0,l.useRef)(null),v=(0,l.useRef)(null),N=(0,l.useRef)(null),_=(0,l.useRef)(null),R=(0,l.useRef)(null),C=(0,l.useRef)(null),y=(0,l.useRef)(null),O=(0,l.useRef)(null),w=(0,l.useRef)(null),S=(0,l.useRef)(null),A=(0,l.useRef)(null),E=(0,l.useRef)(null),P=(0,l.useRef)(null),I=(0,l.useRef)(null),L=(0,l.useRef)(null),Z=(0,l.useState)(""),U=Z[0],k=Z[1],T=(0,l.useState)([]),B=T[0],M=T[1],D=a(6455),V=u()(D),z=function(){var e={amount:0,receiptNumber:b.current.value,date:x.current.value,observation:P.current.value,paymentConcepts:[]};return B.forEach((function(n){!function(e,n,a){var r=Number.parseInt(n.current.value);r>0&&e.paymentConcepts.push({name:a,amount:r})}(e,n.ref,n.name)})),e.amount=m(e),p.current.value=m(e),e},G=function(e){fetch("".concat("http://localhost:4000","/api/users/payments/").concat(n),{method:"POST",headers:{"Referrer-Policy":"origin-when-cross-origin",Authorization:"Bearer "+localStorage.getItem("auth_token"),"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000")},body:JSON.stringify(e)}).then((function(e){return e.ok?Promise.resolve({message:"Pago agregado correctamente"}):Promise.reject({message:"Hubo un error al intentar registrar el pago"})})).then((function(e){V.fire({icon:"success",title:"Pago registrado!",text:e.message,confirmButtonColor:"#31B411",confirmButtonText:"Continuar"}).then((function(e){e&&location.reload()}))}))},J=function(e,n,a){e=(0,s.Z)((0,r.Z)({},e),{id:Number.parseInt(a)}),fetch("".concat("http://localhost:4000","/api/users/editpayments/").concat(n),{method:"PUT",headers:{"Referrer-Policy":"origin-when-cross-origin",Authorization:"Bearer "+localStorage.getItem("auth_token"),"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000")},body:JSON.stringify(e)}).then((function(e){return e.ok?Promise.resolve({message:"Pago actualizado correctamente"}):Promise.reject({message:"Hubo un error al intentar registrar el pago"})})).then((function(e){V.fire({icon:"success",title:"Pago actualizado!",text:e.message,confirmButtonColor:"#31B411",confirmButtonText:"Continuar"}).then((function(e){e&&location.reload()}))}))};return(0,l.useEffect)((function(){var e;!function(){var e=[];e.push({name:"CURSOS",ref:j}),e.push({name:"MENSUALIDAD",ref:v}),e.push({name:"CAMISETA",ref:N}),e.push({name:"EXCURSION",ref:_}),e.push({name:"NOCTURNA",ref:R}),e.push({name:"CARNE",ref:C}),e.push({name:"UNIFORME",ref:y}),e.push({name:"INSCRIPC.",ref:O}),e.push({name:"PLAN ADEL.",ref:w}),e.push({name:"CAMPAMENTO",ref:S}),e.push({name:"INSIGNIAS",ref:A}),e.push({name:"OTROS",ref:E}),M(e)}(),e=n,fetch("".concat("http://localhost:4000","/api/users/").concat(e),{mode:"cors",method:"GET",headers:{"Referrer-Policy":"origin-when-cross-origin",Authorization:"Bearer "+localStorage.getItem("auth_token"),"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000")}}).then((function(e){return e.json().then((function(n){return e.ok?Promise.resolve(n):Promise.reject(n)}))})).then((function(e){k(e.data.name+" "+e.data.lastName)}))}),[]),(0,l.useEffect)((function(){o&&B.length>0&&function(e,n){fetch("".concat("http://localhost:4000","/api/users/payment/").concat(e),{method:"GET",headers:{"Referrer-Policy":"origin-when-cross-origin",Authorization:"Bearer "+localStorage.getItem("auth_token"),"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000")}}).then((function(e){return e.json().then((function(n){return e.ok?Promise.resolve(n):Promise.reject(n)}))})).then((function(e){var a=e.data.payments.filter((function(e){return e.id==Number.parseInt(n)}));if(a.length>0){var r=a[0];p.current.value=r.amount,b.current.value=r.receiptNumber,P.current.value=r.observation;var s=new Date(r.date).toISOString().split("T")[0].split("-");x.current.value=s[0]+"-"+s[2]+"-"+s[1],r.paymentConcepts.forEach((function(e){var n=f(e.name);n&&(n.current.value=e.amount)}))}}))}(n,o)}),[B]),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:(0,t.jsxs)("h1",{className:"".concat(c().text_title," p-5"),children:["\xa1Registro de pago ",U,"!"]})}),(0,t.jsxs)("section",{className:c().contenedor,children:[(0,t.jsx)("div",{children:(0,t.jsxs)("p",{className:c().titulo,children:[(0,t.jsx)("img",{className:c().logo,src:"/logo.png",alt:"Logo 113"}),"Grupo Scout 113",(0,t.jsx)("br",{}),(0,t.jsx)("p",{className:c().subtitulo,children:'"Centinelas"'})]})}),(0,t.jsx)("div",{className:"".concat(c().rec," form row "),children:(0,t.jsx)("div",{className:"col-sm-12 col-md-10 col-lg-10",children:(0,t.jsxs)("p",{className:c().desc,children:[(0,t.jsx)("label",{className:c().label1,children:"Recibo N\xb0"}),(0,t.jsx)("input",{placeholder:"N\xfamero de recibo",ref:b,className:"".concat(c().inputR," form-control"),type:"text",maxLength:30})]})})}),(0,t.jsxs)("div",{className:"row col-12",children:[(0,t.jsx)("div",{className:"col-sm-12 col-md-6 col-lg-6",children:(0,t.jsxs)("p",{className:c().desc,children:[(0,t.jsx)("label",{className:c().label,children:"Valor total"}),(0,t.jsx)("input",{ref:p,className:"".concat(c().inputR," form-control"),readOnly:!0,disabled:!0,type:"text",maxLength:30})]})}),(0,t.jsx)("div",{className:"col-sm-12 col-md-6 col-lg-6",children:(0,t.jsxs)("p",{className:c().desc,children:[(0,t.jsx)("label",{className:c().label,children:"Fecha"}),(0,t.jsx)("input",{ref:x,className:"".concat(c().input," form-control"),type:"date",max:function(){var e=new Date,n=e.getDate(),a=""+n;n<9&&(a="0"+n);var r=e.getMonth()+1,s=""+r;return r<9&&(s="0"+r),e.getFullYear()+"-"+s+"-"+a}()})]})})]}),(0,t.jsxs)("div",{className:"row col-12",children:[(0,t.jsx)("div",{className:"col-lg-4",children:(0,t.jsxs)("p",{className:c().desc,children:[(0,t.jsx)("label",{className:c().label,children:"Cursos"}),(0,t.jsx)("input",{placeholder:"Valor",ref:j,className:"".concat(c().input," form-control"),type:"number",maxLength:30,onChange:z})]})}),(0,t.jsx)("div",{className:"col-lg-4",children:(0,t.jsxs)("p",{className:c().desc,children:[(0,t.jsx)("label",{className:c().label,children:"Mensualidad"}),(0,t.jsx)("input",{placeholder:"Valor",ref:v,className:"".concat(c().input," form-control"),type:"number",maxLength:30,onChange:z})]})}),(0,t.jsx)("div",{className:"col-lg-4",children:(0,t.jsxs)("p",{className:c().desc,children:[(0,t.jsx)("label",{className:c().label,children:"Camiseta"}),(0,t.jsx)("input",{placeholder:"Valor",ref:N,className:"".concat(c().input," form-control"),type:"number",maxLength:30,onChange:z})]})})]}),(0,t.jsxs)("div",{className:"row col-12",children:[(0,t.jsx)("div",{className:"col-lg-4",children:(0,t.jsxs)("p",{className:c().desc,children:[(0,t.jsx)("label",{className:c().label,children:"Excursi\xf3n"}),(0,t.jsx)("input",{placeholder:"Valor",ref:_,className:"".concat(c().input," form-control"),type:"number",maxLength:30,onChange:z})]})}),(0,t.jsx)("div",{className:"col-lg-4",children:(0,t.jsxs)("p",{className:c().desc,children:[(0,t.jsx)("label",{className:c().label,children:"Nocturna"}),(0,t.jsx)("input",{placeholder:"Valor",ref:R,className:"".concat(c().input," form-control"),type:"number",maxLength:30,onChange:z})]})}),(0,t.jsx)("div",{className:"col-lg-4",children:(0,t.jsxs)("p",{className:c().desc,children:[(0,t.jsx)("label",{className:c().label,children:"Carn\xe9"}),(0,t.jsx)("input",{placeholder:"Valor",ref:C,className:"".concat(c().input," form-control"),type:"number",maxLength:30,onChange:z})]})})]}),(0,t.jsxs)("div",{className:"row col-12",children:[(0,t.jsx)("div",{className:"col-lg-4",children:(0,t.jsxs)("p",{className:c().desc,children:[(0,t.jsx)("label",{className:c().label,children:"Uniforme"}),(0,t.jsx)("input",{placeholder:"Valor",ref:y,className:"".concat(c().input," form-control"),type:"number",maxLength:30,onChange:z})]})}),(0,t.jsx)("div",{className:"col-lg-4",children:(0,t.jsxs)("p",{className:c().desc,children:[(0,t.jsx)("label",{className:c().label,children:"Inscripci\xf3n"}),(0,t.jsx)("input",{placeholder:"Valor",ref:O,className:"".concat(c().input," form-control"),type:"number",maxLength:30,onChange:z})]})}),(0,t.jsx)("div",{className:"col-lg-4",children:(0,t.jsxs)("p",{className:c().desc,children:[(0,t.jsx)("label",{className:c().label,children:"Act. Eco"}),(0,t.jsx)("input",{placeholder:"Valor",ref:w,className:"".concat(c().input," form-control"),type:"number",maxLength:30,onChange:z})]})})]}),(0,t.jsxs)("div",{className:"row col-12",children:[(0,t.jsx)("div",{className:"col-lg-4",children:(0,t.jsxs)("p",{className:c().desc,children:[(0,t.jsx)("label",{className:c().label,children:"Campamento"}),(0,t.jsx)("input",{placeholder:"Valor",ref:S,className:"".concat(c().input," form-control"),type:"number",maxLength:30,onChange:z})]})}),(0,t.jsx)("div",{className:"col-lg-4",children:(0,t.jsxs)("p",{className:c().desc,children:[(0,t.jsx)("label",{className:c().label,children:"Insignias"}),(0,t.jsx)("input",{placeholder:"Valor",ref:A,className:"".concat(c().input," form-control"),type:"number",maxLength:30,onChange:z})]})}),(0,t.jsx)("div",{className:"col-lg-4",children:(0,t.jsxs)("p",{className:c().desc,children:[(0,t.jsx)("label",{className:c().label,children:"Otros"}),(0,t.jsx)("input",{placeholder:"Valor",ref:E,className:"".concat(c().input," form-control"),type:"number",maxLength:30,onChange:z})]})})]}),(0,t.jsx)("div",{className:"row col-12",children:(0,t.jsx)("div",{className:"col-sm-12 col-md-10 col-lg-10",children:(0,t.jsxs)("p",{className:c().desc,children:[(0,t.jsx)("label",{className:c().label,children:"Observaciones"}),(0,t.jsx)("input",{placeholder:"Ingrese una observaci\xf3n de ser necesario...",ref:P,className:"".concat(c().inputObser," input-group"),type:"text"})]})})}),(0,t.jsxs)("div",{className:c().contenedor_btns,children:[(0,t.jsx)("button",{ref:I,className:"btn btn-success ".concat(c().botones),onClick:function(){o?h():i()},children:o?"Actualizar Pago":"Agregar Pago"}),(0,t.jsx)("button",{ref:L,className:"btn btn-danger ".concat(c().botones),onClick:function(){return g.push("/dashboard/tesorero")},children:o?"Cancelar":"Cancelar Pago"})]})]})]})}},2461:function(e,n,a){"use strict";a.d(n,{EZ:function(){return t},Sv:function(){return s},uU:function(){return r}});var r,s=function(e,n){switch(n){case r.SCOUT:e.push("/dashboard/info","/dashboard",{shallow:!0});break;case r.RAMA:e.push("/dashboard/jefe-rama","/dashboard",{shallow:!0});break;case r.GRUPO:e.push("/dashboard/jefe-grupo/inscripciones","/dashboard",{shallow:!0});break;case r.TESORERO:e.push("/dashboard/tesorero","/dashboard",{shallow:!0});break;default:e.push("/dashboard/info","/dashboard",{shallow:!0})}};function t(){fetch("http://localhost:4000/api/payments/generateCSV/1",{method:"GET",headers:new Headers({"Referrer-Policy":"origin-when-cross-origin",Authorization:"Bearer "+localStorage.getItem("auth_token"),"Access-Control-Allow-Origin":"".concat("http://localhost:3000")})}).then((function(e){return e.blob()})).then((function(e){var n=window.URL.createObjectURL(e);Object.assign(document.createElement("a"),{target:"_blank",href:n,download:"Historial de pagos-".concat((new Date).toISOString().split("T")[0],".csv")}).click(),setTimeout((function(){window.URL.revokeObjectURL(n)}),100)}))}!function(e){e[e.SCOUT=0]="SCOUT",e[e.TESORERO=1]="TESORERO",e[e.RAMA=2]="RAMA",e[e.GRUPO=3]="GRUPO",e[e.ADMIN=4]="ADMIN"}(r||(r={}))},4181:function(e,n,a){"use strict";var r=a(7294),s=a(1163),t=a.n(s),o=a(9898);n.Z=function(e,n,a){return function(s){var c=(0,o.xJ)(),l=c.user,i=c.isLoading,u=c.error;return(0,r.useEffect)((function(){var e=window.location?window.location:null;i&&u?t().replace("/login?r=".concat(e.pathname+encodeURIComponent(e.search)),"/login",{shallow:!0}):i||l.status?n&&!i&&(a&&n!=l.roles.id-1||n>l.roles.id-1)&&t().push("/dashboard"):t().push("/logout")}),[i,u]),(0,r.createElement)(e,s,null)}}},7940:function(e){e.exports={sidebar:"Slidebar_sidebar__pw5I_",sidelink:"Slidebar_sidelink__I0n_O",active:"Slidebar_active__BkFah",closebtn:"Slidebar_closebtn__Q2ruM",openbtn:"Slidebar_openbtn__WaRF4",content:"Slidebar_content__s2yv4",sideicon:"Slidebar_sideicon__ypeH_",header:"Slidebar_header__JuoDb",image:"Slidebar_image__V0t9C",name:"Slidebar_name__qFgGz",branch:"Slidebar_branch__qdB8B"}},1449:function(e){e.exports={contenedor:"Agregar_contenedor__DeR7L",contenedor_btns:"Agregar_contenedor_btns__zPR3m",text_title:"Agregar_text_title__jNBCJ",icon:"Agregar_icon__BQESi",titulo:"Agregar_titulo__9IuKi",subtitulo:"Agregar_subtitulo__MI6BR",desc:"Agregar_desc__YjfOx",label:"Agregar_label__VODvX",input:"Agregar_input__608mG",logo:"Agregar_logo__OSStO",label1:"Agregar_label1__vlfzi",inputR:"Agregar_inputR__LkEIY",rec:"Agregar_rec__mnbXg",inputObser:"Agregar_inputObser__cAI0y",botones:"Agregar_botones___9H2W"}},9396:function(e,n,a){"use strict";function r(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})),e}a.d(n,{Z:function(){return r}})}}]);